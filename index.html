<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#F4A523">
    <title>Bhaskar Solar</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="icons/icon-192.svg">
</head>
<body>
    <div id="app">
        <!-- Login Page -->
        <div id="loginPage" class="page active">
            <div class="login-box">
                <div class="logo">
                    <svg viewBox="0 0 60 60" class="sun"><circle cx="30" cy="30" r="18" fill="#FFD93D"/><g stroke="#FFD93D" stroke-width="3"><line x1="30" y1="5" x2="30" y2="12"/><line x1="30" y1="48" x2="30" y2="55"/><line x1="5" y1="30" x2="12" y2="30"/><line x1="48" y1="30" x2="55" y2="30"/></g></svg>
                    <h1>Bhaskar Solar</h1>
                </div>
                <div class="tabs">
                    <button class="tab active" data-tab="customer">Customer</button>
                    <button class="tab" data-tab="vendor">Vendor</button>
                </div>
                <form id="customerForm" class="form active">
                    <input type="text" id="custCode" placeholder="Application Code" required>
                    <input type="tel" id="custPhone" placeholder="Phone (10 digits)" maxlength="10" required>
                    <input type="text" id="custAddress" placeholder="Site Address" required>
                    <button type="submit" class="btn">Login</button>
                </form>
                <form id="vendorForm" class="form">
                    <input type="text" id="vendId" placeholder="Vendor ID" required>
                    <input type="tel" id="vendPhone" placeholder="Phone (10 digits)" maxlength="10" required>
                    <input type="password" id="vendCode" placeholder="Access Code" required>
                    <button type="submit" class="btn">Login</button>
                </form>
            </div>
        </div>

        <!-- Customer Dashboard -->
        <div id="customerDash" class="page">
            <nav class="nav">
                <div class="nav-brand">‚òÄÔ∏è Bhaskar Solar</div>
                <div class="nav-links">
                    <button class="nav-link active" data-section="overview">Overview</button>
                    <button class="nav-link" data-section="production">Production</button>
                    <button class="nav-link" data-section="documents">Docs</button>
                    <button class="nav-link" data-section="chat">Chat</button>
                </div>
                <div class="nav-user">
                    <span id="custName">Customer</span>
                    <button class="btn-sm btn-logout" onclick="logout()">Logout</button>
                </div>
            </nav>

            <section id="overview" class="section active">
                <h2>Welcome, <span id="custNameDisplay">Customer</span></h2>
                <div class="code-display">
                    <span>Application Code:</span>
                    <strong id="appCode">BSV-2024-0001</strong>
                    <span class="status">Under Review</span>
                </div>
                <div class="stats">
                    <div class="stat"><div class="stat-val">6.5 kW</div><div class="stat-label">System Size</div></div>
                    <div class="stat"><div class="stat-val">24</div><div class="stat-label">Panels</div></div>
                    <div class="stat"><div class="stat-val">400W</div><div class="stat-label">Panel Rating</div></div>
                </div>
            </section>

            <section id="production" class="section">
                <h2>Production Monitoring</h2>
                <div class="stats">
                    <div class="stat highlight"><div class="stat-val">14.2</div><div class="stat-label">kWh Today</div></div>
                    <div class="stat"><div class="stat-val">412.8</div><div class="stat-label">kWh This Month</div></div>
                    <div class="stat"><div class="stat-val">87%</div><div class="stat-label">Efficiency</div></div>
                </div>
                <div class="chart" id="chart"></div>
            </section>

            <section id="documents" class="section">
                <h2>Documents</h2>
                <div class="doc-list">
                    <div class="doc-item"><span>üìÑ Solar Panel Warranty</span><button class="btn-sm">View</button></div>
                    <div class="doc-item"><span>üìÑ Inverter Warranty</span><button class="btn-sm">View</button></div>
                    <div class="doc-item"><span>üìÑ Installation Quotation</span><button class="btn-sm">View</button></div>
                </div>
            </section>

            <section id="chat" class="section">
                <h2>Chat with Support</h2>
                <div class="chat-box" id="chatBox">
                    <div class="msg received">Hello! How can we help you?</div>
                </div>
                <div class="chat-input">
                    <input type="text" id="msgInput" placeholder="Type a message...">
                    <button class="btn" onclick="sendMessage()">Send</button>
                </div>
            </section>
        </div>

        <!-- Vendor Dashboard -->
        <div id="vendorDash" class="page">
            <nav class="nav">
                <div class="nav-brand">‚òÄÔ∏è Bhaskar Solar</div>
                <div class="nav-links">
                    <button class="nav-link active" data-section="vOverview">Dashboard</button>
                    <button class="nav-link" data-section="vCustomers">Customers</button>
                    <button class="nav-link" data-section="vTools">Tools</button>
                </div>
                <div class="nav-user">
                    <span id="vendName">Vendor</span>
                    <button class="btn-sm btn-logout" onclick="logout()">Logout</button>
                </div>
            </nav>

            <section id="vOverview" class="section active">
                <h2>Vendor Dashboard</h2>
                <div class="stats">
                    <div class="stat"><div class="stat-val">48</div><div class="stat-label">Customers</div></div>
                    <div class="stat"><div class="stat-val">12</div><div class="stat-label">Projects</div></div>
                    <div class="stat"><div class="stat-val">156</div><div class="stat-label">Installations</div></div>
                </div>
                <button class="btn" onclick="showCodeGen()">Generate New Code</button>
            </section>

            <section id="vCustomers" class="section">
                <h2>Customer Codes</h2>
                <div class="code-list" id="codeList"></div>
            </section>

            <section id="vTools" class="section">
                <h2>Calculators</h2>
                <div class="calc">
                    <h3>System Size Calculator</h3>
                    <input type="number" id="monthlyBill" placeholder="Monthly Bill (‚Çπ)">
                    <button class="btn" onclick="calcSystem()">Calculate</button>
                    <div id="calcResult" class="result"></div>
                </div>
                <div class="calc">
                    <h3>ROI Calculator</h3>
                    <input type="number" id="sysCost" placeholder="System Cost (‚Çπ)">
                    <input type="number" id="annSavings" placeholder="Annual Savings (‚Çπ)">
                    <button class="btn" onclick="calcROI()">Calculate</button>
                    <div id="roiResult" class="result"></div>
                </div>
            </section>
        </div>

        <!-- Code Generation Modal -->
        <div id="codeModal" class="modal">
            <div class="modal-box">
                <h3>Generate Application Code</h3>
                <input type="text" id="newCustName" placeholder="Customer Name">
                <input type="tel" id="newCustPhone" placeholder="Phone" maxlength="10">
                <button class="btn" onclick="genCode()">Generate</button>
                <div id="genCodeDisplay" class="code-result"></div>
                <button class="btn-sm" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <div id="toast"></div>
    <script src="js/app.js"></script>
</body>
</html>
